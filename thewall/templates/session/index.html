{% extends "wall-wrapper.html" %}

{% block content %}
{% csrf_token %}

<h1>{{ unconf|title }} Session Ideas</h1>

<div class="help-box">
	<p>Thanks for joining us for the {{ unconf|title }} unconference!  If you'd like to add a session, click the <strong>"New Session"</strong> link at the top of the page.  To vote for your prefered sessions, click the <strong>"+"</strong> button next to that session, or the <strong>"-"</strong> to down vote.  If you have any questions, don't hesitate to <a href="mailto:webmaster@neworganizing.com">email us</a>.</p>
</div>

<hr />

{% for session in sessions %}
	<div class="clearfix">
		<div class="row">
			<div class="span9">
				<h2>
					{{ session.title }}
					{% if request.user.participant in session.presenters.all or request.user.is_staff or request.user = session.creator %}
						(<a href="{% url "session" unconf=unconf id=session.pk action="edit" %}">Edit</a>)
					{% endif %}
				</h2>
				<h3>{{ session.headline }}</h3>
			</div>
			<div class="span2">
				<p>Tags:
				{% for tag in session.tags.all %}
					{{ tag|title }}{% if not forloop.last %}, {% endif %}
				{% endfor %}
				</p>
			</div>
		</div>
		<div class="row">
			<div class="span11">
				{{ session.description|linebreaks }}
			</div>

			<div class="span8">
				<p><strong>Presenters:</strong>
				{% for presenter in session.presenters.all %}
					{{ presenter }}{% if not forloop.last %}, {% endif %}
				{% endfor %}
				{% if session.extra_presenters %}
					{% if session.presenters.count > 0 %}, {% endif %}
					{{ session.extra_presenters }}
				{% endif %}
				</p>
			</div>

			<div class="span3">
				{% if request.user.is_authenticated %}
				<div class="vote-widget">
					<div class="vote-container">
						<div class="vote-total" id="vote-total-{{ session.id }}" style="width: {{ session.vote_width }}px;">
						</div>
					</div>

					{% if request.user.participant %}
					<a class="button vote-link {% if session.id in request.user.participant.get_up_votes %}inactive{% endif %}" id="vote-up-{{ session.id }}" href="{% url "vote" unconf=unconf id=session.id %}" data-value="1">+</a>
					<a class="button vote-link {% if session.id in request.user.participant.get_down_votes %}inactive{% endif %}" id="vote-down-{{ session.id }}" href="{% url "vote" unconf=unconf id=session.id %}" data-value="-1">-</a>
					{% else %}
					<a class="button fake-vote-link" href="{% url "create_participant" %}">+</a>
					<a class="button fake-vote-link" href="{% url "create_participant" %}">-</a>
					{% endif %}
				</div>
				{% endif %}
			</div>
		</div>
	</div>
	<hr >
{% endfor %}
{% endblock %}